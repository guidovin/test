-- MySQL Script generated by MySQL Workbench
-- qua 11 jul 2018 00:53:35 -03
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema merenda
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `merenda` ;

-- -----------------------------------------------------
-- Schema merenda
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `merenda` DEFAULT CHARACTER SET utf8mb4 ;
USE `merenda` ;

-- -----------------------------------------------------
-- Table `merenda`.`alimento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`alimento` ;

CREATE TABLE IF NOT EXISTS `merenda`.`alimento` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(80) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `perecivel` TINYINT(4) NULL DEFAULT NULL,
  `qtd_atende` INT(11) NULL DEFAULT NULL,
  `medida` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `fornecedor` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `marca` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`tipo_instituicao`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`tipo_instituicao` ;

CREATE TABLE IF NOT EXISTS `merenda`.`tipo_instituicao` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`instituicao`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`instituicao` ;

CREATE TABLE IF NOT EXISTS `merenda`.`instituicao` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_tipo` INT(11) NOT NULL,
  `nome` VARCHAR(80) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `inep` VARCHAR(8) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `endereco` VARCHAR(120) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `qtd_alunos` INT(11) NULL DEFAULT NULL,
  `telefone` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`, `id_tipo`),
  INDEX `fk_instituicao_tipo_idx` (`id_tipo` ASC),
  CONSTRAINT `fk_instituicao_tipo`
    FOREIGN KEY (`id_tipo`)
    REFERENCES `merenda`.`tipo_instituicao` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`cardapio`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`cardapio` ;

CREATE TABLE IF NOT EXISTS `merenda`.`cardapio` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_instituicao` INT(11) NOT NULL,
  `data_cardapio` VARCHAR(10) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `lanche_manha` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `almoco` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `lanche_tarde` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `janta` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_cardapio_instituicao_idx` (`id_instituicao` ASC),
  CONSTRAINT `fk_cardapio_instituicao`
    FOREIGN KEY (`id_instituicao`)
    REFERENCES `merenda`.`instituicao` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci
PACK_KEYS = DEFAULT;


-- -----------------------------------------------------
-- Table `merenda`.`pessoa`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`pessoa` ;

CREATE TABLE IF NOT EXISTS `merenda`.`pessoa` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(80) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `cpf` VARCHAR(11) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`tipo_conta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`tipo_conta` ;

CREATE TABLE IF NOT EXISTS `merenda`.`tipo_conta` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `descricao` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`conta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`conta` ;

CREATE TABLE IF NOT EXISTS `merenda`.`conta` (
  `id_pessoa` INT(11) NOT NULL,
  `id_instituicao` INT(11) NOT NULL,
  `id_tipo_conta` INT(11) NULL DEFAULT NULL,
  `matricula` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `usuario` VARCHAR(40) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `senha` VARCHAR(150) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id_pessoa`, `id_instituicao`),
  INDEX `fk_conta_instituicao_idx` (`id_instituicao` ASC),
  INDEX `fk_conta_tipo_idx` (`id_tipo_conta` ASC),
  CONSTRAINT `fk_conta_instituicao`
    FOREIGN KEY (`id_instituicao`)
    REFERENCES `merenda`.`instituicao` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conta_pessoa`
    FOREIGN KEY (`id_pessoa`)
    REFERENCES `merenda`.`pessoa` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conta_tipo`
    FOREIGN KEY (`id_tipo_conta`)
    REFERENCES `merenda`.`tipo_conta` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`entrada`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`entrada` ;

CREATE TABLE IF NOT EXISTS `merenda`.`entrada` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_alimento` INT(11) NOT NULL,
  `id_instituicao` INT(11) NOT NULL,
  `data` VARCHAR(10) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `qtd_alimento` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_entrada_alimento_idx` (`id_alimento` ASC),
  INDEX `fk_entrada_instituicao_idx` (`id_instituicao` ASC),
  CONSTRAINT `fk_entrada_alimento`
    FOREIGN KEY (`id_alimento`)
    REFERENCES `merenda`.`alimento` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_entrada_instituicao`
    FOREIGN KEY (`id_instituicao`)
    REFERENCES `merenda`.`instituicao` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`pedido`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`pedido` ;

CREATE TABLE IF NOT EXISTS `merenda`.`pedido` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_instituicao` INT(11) NOT NULL,
  `data` VARCHAR(10) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_pedido_instituicao_idx` (`id_instituicao` ASC),
  CONSTRAINT `fk_pedido_instituicao`
    FOREIGN KEY (`id_instituicao`)
    REFERENCES `merenda`.`instituicao` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`entrega`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`entrega` ;

CREATE TABLE IF NOT EXISTS `merenda`.`entrega` (
  `id_pedido` INT(11) NOT NULL,
  `data_entrega` VARCHAR(10) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `fornecedor` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`id_pedido`),
  CONSTRAINT `fk_entrega_pedido`
    FOREIGN KEY (`id_pedido`)
    REFERENCES `merenda`.`pedido` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`lote_estoque`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`lote_estoque` ;

CREATE TABLE IF NOT EXISTS `merenda`.`lote_estoque` (
  `id` INT(11) NOT NULL,
  `id_alimento` INT(11) NOT NULL,
  `qtd_alimento` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`id`, `id_alimento`),
  INDEX `fk_lote_estoque_alimento_idx` (`id_alimento` ASC),
  CONSTRAINT `fk_lote_estoque_alimento`
    FOREIGN KEY (`id_alimento`)
    REFERENCES `merenda`.`alimento` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_lote_estoque_instituicao`
    FOREIGN KEY (`id`)
    REFERENCES `merenda`.`instituicao` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `merenda`.`lote_pedido`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`lote_pedido` ;

CREATE TABLE IF NOT EXISTS `merenda`.`lote_pedido` (
  `id` INT(11) NOT NULL,
  `id_alimento` INT(11) NOT NULL,
  `qtd_alimento` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`, `id_alimento`),
  INDEX `fk_lote_pedido_idx` (`id` ASC),
  INDEX `fk_lote_alimento_idx` (`id_alimento` ASC),
  CONSTRAINT `fk_lote_alimento`
    FOREIGN KEY (`id_alimento`)
    REFERENCES `merenda`.`alimento` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_lote_pedido`
    FOREIGN KEY (`id`)
    REFERENCES `merenda`.`pedido` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`saida`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`saida` ;

CREATE TABLE IF NOT EXISTS `merenda`.`saida` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `id_alimento` INT(11) NULL DEFAULT NULL,
  `id_instituicao` INT(11) NULL DEFAULT NULL,
  `data` VARCHAR(10) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `qtd_alimento` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_saida_alimento_idx` (`id_alimento` ASC),
  INDEX `fk_saida_instituicao_idx` (`id_instituicao` ASC),
  CONSTRAINT `fk_saida_alimento`
    FOREIGN KEY (`id_alimento`)
    REFERENCES `merenda`.`alimento` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_saida_instituicao`
    FOREIGN KEY (`id_instituicao`)
    REFERENCES `merenda`.`instituicao` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `merenda`.`salt`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `merenda`.`salt` ;

CREATE TABLE IF NOT EXISTS `merenda`.`salt` (
  `id` INT NOT NULL,
  `salt` VARCHAR(100) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

LOCK TABLES `salt` WRITE;
/*!40000 ALTER TABLE `salt` DISABLE KEYS */;
INSERT INTO `salt` VALUES (0,'ecoieno1in1od39doa3hd1o');
/*!40000 ALTER TABLE `salt` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `tipo_conta` WRITE;
/*!40000 ALTER TABLE `tipo_conta` DISABLE KEYS */;
INSERT INTO `tipo_conta` VALUES (1,'Administrador'),(2,'Diretor'),(3,'Leitor');
/*!40000 ALTER TABLE `tipo_conta` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `tipo_instituicao` WRITE;
/*!40000 ALTER TABLE `tipo_instituicao` DISABLE KEYS */;
INSERT INTO `tipo_instituicao` VALUES (1,'Secretaria de Educação'),(2,'Escola Tipo A'),(3,'Escola Tipo B'),(4,'Escola Tipo C');
/*!40000 ALTER TABLE `tipo_instituicao` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `instituicao` WRITE;
/*!40000 ALTER TABLE `instituicao` DISABLE KEYS */;
INSERT INTO `instituicao` VALUES (1,1,'efaefaaef','12345678','Rua da Ouvidor',50,'2140028922'),(2,2,'Escolinha do professor Raimundo','98172487','Rua dos Guajajaras',1500,'9867432323'),(3,4,'Escolinha do Prof Girafales','12345812','Vila do Chavez',300,'3255543212');
/*!40000 ALTER TABLE `instituicao` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `pessoa` WRITE;
/*!40000 ALTER TABLE `pessoa` DISABLE KEYS */;
INSERT INTO `pessoa` VALUES (1,'admin','10010010023'),(2,'Matheus Feitosa','41239941231'),(3,'Victor Lento','65512341253');
/*!40000 ALTER TABLE `pessoa` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `conta` WRITE;
/*!40000 ALTER TABLE `conta` DISABLE KEYS */;
INSERT INTO `conta` VALUES (1,1,1,'1001001001','root','48A538310CCA5506BBFF12908F6B5F1B'),(2,3,3,'5647389201','lei','640FA97CD253EBCC6BA6F195E2E372A9'),(3,2,2,'1029387456','dir','114D4B88B648593D797FC7F8313D2755');
/*!40000 ALTER TABLE `conta` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `alimento` WRITE;
/*!40000 ALTER TABLE `alimento` DISABLE KEYS */;
INSERT INTO `alimento` VALUES (1,'Banana',1,100,'Quilograma (kg)','PalmTree S.A.','Braziliense'),(2,'Maça',1,30,'Quilograma (kg)','Isaac Newton S.A.','Argetzina'),(3,'Ovos',1,77,'Dúzia','Galinha Garnizé S.A.','Caipirinha'),(4,'Melancia',1,10,'Unidade','Magali S.A.','Vermelho por Dentro'),(5,'Cana de Açucar',0,2,'Metro (m)','Pão de Açucar S.A.','Canavial'),(6,'Arroz',0,62,'Grama (gm)','Chineses S.A.','Soltinho'),(7,'Feijão',0,120,'Quilograma (kg)','Zé do Caroço S.A.','Java Beans');
/*!40000 ALTER TABLE `alimento` ENABLE KEYS */;
UNLOCK TABLES;

LOCK TABLES `cardapio` WRITE;
/*!40000 ALTER TABLE `cardapio` DISABLE KEYS */;
INSERT INTO `cardapio` VALUES (1,2,'12/07/2018','maça com banana','strognoff de frango','banana com maça','caldo de cana'),(2,2,'13/07/2018','banana','arroz com feijão','melancia','macarrão'),(3,2,'14/07/2018','feijão com banana','macarrão com caldo de cana',NULL,NULL);
/*!40000 ALTER TABLE `cardapio` ENABLE KEYS */;
UNLOCK TABLES;